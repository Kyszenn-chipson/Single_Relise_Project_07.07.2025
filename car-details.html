<!doctype html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Деталі автомобіля</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">Головна</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarScroll">
                <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                    <li class="nav-item">
                        <a class="nav-link" href="favorites.html">Мої обрані</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-4" id="car-details-container">
        </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script src="data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const carId = urlParams.get('id');

            const car = cars.find(c => c.id === carId);
            const detailsContainer = document.getElementById('car-details-container');

            if (car) {
                document.title = `${car.brand} ${car.model} | Деталі`;
                let imageCarousel = ``;
                if (car.image && car.image.length > 0) {
                    imageCarousel = `
                        <div id="carCarousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                ${car.image.map((imgUrl, index) => `
                                    <div class="carousel-item ${index === 0 ? 'active' : ''}">
                                        <img src="${imgUrl}" class="d-block w-100" alt="Зображення ${car.model} ${index + 1}">
                                    </div>
                                `).join('')}
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carCarousel" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Попередня</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carCarousel" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Наступна</span>
                            </button>
                        </div>
                    `;
                } else {
                    imageCarousel = `<p>Немає зображень для цього авто.</p>`;
                }

                detailsContainer.innerHTML = `
                    <h1 class="mb-4">${car.brand} ${car.model}</h1>
                    <div class="row">
                        <div class="col-lg-8">
                            ${imageCarousel}
                        </div>
                        <div class="col-lg-4">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><strong>Рік:</strong> ${car.year}</li>
                                <li class="list-group-item"><strong>Пробіг:</strong> ${car.mileage.toLocaleString()} км</li>
                                <li class="list-group-item"><strong>Тип кузова:</strong> ${car.bodyType}</li>
                                <li class="list-group-item"><strong>Ціна:</strong> $${car.price.toLocaleString()}</li>
                                <li class="list-group-item"><strong>Опис:</strong> ${car.description}</li>
                                <li class="list-group-item"><strong>Контакти:</strong>
                                    <ul>
                                        <li><strong>Телефон:</strong> <span>${car.contact.phone}</span></li>
                                        <li><strong>Email:</strong> <span>${car.contact.email}</span></li>
                                    </ul>
                                </li>
                                <li class="list-group-item"><strong>Характеристики:</strong>
                                    <ul>
                                        <li><strong>Тип палива:</strong> ${car.specs.fuelType}</li>
                                        <li><strong>Коробка передач:</strong> ${car.specs.transmission}</li>
                                        <li><strong>Потужність:</strong> ${car.specs.enginePowerHp} к.с.</li>
                                    </ul>
                                </li>
                            </ul>
                            <button class="btn btn-outline-danger mt-3 add-to-favorites-btn" data-id="${car.id}">
                                <span class="icon">&#10084;</span> Додати до обраних
                            </button>
                        </div>
                    </div>
                `;

                document.querySelector('.add-to-favorites-btn').addEventListener('click', () => {
                    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
                    if (!favorites.includes(carId)) {
                        favorites.push(carId);
                        localStorage.setItem('favorites', JSON.stringify(favorites));
                        alert('Автомобіль додано до обраного!');
                    } else {
                        alert('Цей автомобіль уже в обраному.');
                    }
                });
            } else {
                detailsContainer.innerHTML = '<p class="text-center">Автомобіль не знайдено.</p>';
            }
        });
    </script>
    <footer>Джерело: Google. За питаннями звертайтеся за номером +380974754398</footer>
</body>
</html>
